## Rubyの基礎知識

### オブジェクト
文字列、配列、ハッシュ、数値、nil(null)もすべてオブジェクト。
だからnilや数字、true・falseに対してもメソッドを呼び出すことができる。

### メソッド呼び出し
オブジェクト.メソッド(引数)　引数はいくつも渡すことが可能。そして()は省略可。

### 識別子と予約語

```
BEGIN class ensure nil self when
END des false not super while
alias defined? for or then yield
and do if redo true __LINE__
begin else in rescue undef __FILE__
break elsif module retry unless __ENCODING__
case end next return until
```

### リテラル
ソースコードに直接埋め込み可能な値のこと。

### 変数について
Rubyにおける変数は、慣習として小文字のスネークケース（アンスコで区切る方法）で記載する。
キャメルケース(スペースを使用せず次の文字を大文字で始める記法)は使用しない。
また、数字から始まる変数名は使えない。
さらに、アルファベットと数字以外の変数名は一般的ではない。

### 文字列
シングルクオート・・・式展開できない。#{}も文字列になる。\nも文字列になる。
ダブルクオート・・・「\n」「\r」「\t」といった特殊文字を使用する際こちらを使用。また式展開が可能。

Q:上記二つはどちらを使うべき？
A:どちらでも良い。

### 数値
数字には_を含むことができ、大きな数の区切りとして使用する。

数値と文字列は暗黙的に変換されないので、to_i, to_f, to_sを使用する。

#### 演算子の優先順位

```
::
[]
+ ! ~
**
-
* / %
+ -
<< >>
&
| ^
> >= < <=
<=> == === != =~ !~
&&
||
.. ..,
?:（条件演算子）
= (+=, ~= ・・・)
not
and of(制御フローを扱うのに向いている)
```

### 真偽値と条件分岐
真偽値ルール　→　falseまたはnilであれば偽、それ以外は真
nilも偽として扱われる。

### 論理演算子
&& → かつ
|| → または

!で真偽値を反転できる。

### if文
Rubyのif文は最後に評価された式を戻り値とする。
if文の戻り値を変数に代入することもできる。
ifは修飾子として使うこともできるので、その場合後置ifと呼ばれる。

### unless文
unlessはif not
性質はifと同じ。

### case文
複数条件の指定の場合、elsifよりcaseを使用する。
Rubyのcase文はwhen節に複数値を指定し、そのどれかに一致すれば処理を行わせることができる。
when節はthenを入れることが可能で、その場合は処理を1行にできる。
whenに渡すものはRangeオブジェクトや正規表現オブジェクト、クラスオブジェクトなども使用可能。

### メソッド
defを使用して定義する。
メソッド名も変数と同じルールで記載する。（小文字のスネークケース）

メソッドの場合、最後に評価された式が戻り値になる。returnも省略して良い。
メソッドの引数である()は、何も引数がなければ省略する。実は引数があっても省略できるが、()をつけることが多い。

### 文字列はStringクラスのオブジェクト
ex. "abc".class

### 数字のオブジェクト
大枠はNumericクラス、以下は全てサブクラス。
整数はIntegerクラス
少数はFloatクラス
有理数はRational
複素数はComplexクラス

### %記法
％q! !はシングルクオートで囲ったことになる。
％Q! !はダブルクオートで囲ったことになる。
％! !はダブルクオートで囲ったことになる。

### 行指向文字列リテラル
<<識別子でヒアドキュメントになる(識別子は自由)
<<-でインデントさせることができる。

```
str = <<TEXT
HELLO!
WORLD!
TEXT
puts str
```

### フォーマット指定
sprintfメソッドで、指定されたフォーマットの文字列を作成する。

```
sprintf('%0.3f' % 1.2)  #=> 1.200
```

to_sメソッドで文字列変換。
joinメソッドで配列の連結し1つの文字列に。
*演算子で文字列を繰り返し。

### ビット演算

```
~: ビット反転
&: ビット積
|: ビット和
^: 排他的論理和
>>: 右ビットシフト
<<: 左ビットシフト
```

### 三項演算子
式 ? 真だった場合の処理 : 偽だった場合の処理

### デフォルト値付き引数
引数の値を変える方法として、引数にデフォルト値をつけることが可能。
デフォルト値には固定値だけでなく、メソッドの戻り値や変数、動的に変わる値も指定可能。

```
def greeting(country = "japan")
  if country == "japan
    puts "こんにちは"
  else
    puts "hello"
  end
end

greeting
greeting("USA")
```

### ?で終わるメソッド
?で終わるメソッドは真偽値を返すメソッド。
もちろん自作も可能。

* .empty?
* .include?
* .odd?
* .even?
* .nil?

### !で終わるメソッド
!で終わるメソッドは「使用する際は注意が必要」という意味を持つ。
呼び出したオブジェクトの状態を変更してしまうメソッドを「破壊的メソッド」という。
* .upcase!

### その他のRubyの基礎

#### ガベージコレクション
Rubyは使用されなくなったオブジェクトを回収し、自動的にメモリを解放する。

#### エイリアスメソッド
同じ実装で名前のみが異なるメソッドのこと。
例えば、.lengthと.sizeは同じ。
また、エイリアスは自分でも定義可能。

#### 擬似変数
nil,true,falseなどのこと。
* self オブジェクト自身。
* __FILE__ 現在のソースファイル名
* __LINE__ 現在のソースファイル中の行番号
* __ENCODING__ 現在のソースファイルのスクリプトエンコーディング

#### 参照とは
基本的にすべてがオブジェクトなので、すべてが「参照の値渡し」となる。ただし数値とシンボルはimmutableなので、「値渡し」のように振舞う。
object_idメソッドを使うと、変数に代入されたものがどのオブジェクトを参照しているかわかる。

#### 組み込みライブラリ
インストール不要なもの。
String, Integer, Array, Hashなど。

#### 標準ライブラリ
インストール不要なもの。
date, csv, json,yamlなど。
requireメソッドが必要。

#### gem
インストールが必要なもの。
bundler, rails, rspec, sinatraなど。
requireメソッドが必要。

#### loadメソッドとrequire_relativeメソッド
requireは一回しかライブラリやrbファイルを読み込まない。
loadは毎回無条件に指定したファイルを読み込むことができる。

require_relativeメソッドは自分のファイルの存在するディレクトリがパスの起点となる。

#### puts,print,pメソッド
ターミナルへの出力メソッド

* puts・・・改行を加えて変数の内容やメソッドの戻り値をターミナルへ出力。またメソッド自身の返り血はnil。
* print・・・改行せず変数の内容やメソッドの戻り値をターミナルへ出力。またメソッド自身の返り血はnil。
* p・・・putsと同じように出力するが、文字列の場合その文字列がダブルクオートで囲まれる。また、メソッドの返り血はnilではなく渡したオブジェクトそのものが戻り値となる。

※puts, printは渡したオブジェクトに対してto_sを内部的に呼び出し文字列に変換。
※pは渡したオブジェクトに対してinspectメソッドを内部的に呼び出し文字列に変換。